<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hello World - Brandon Smart's Portfolio</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  /* (Include here all your CSS from previous versions, unchanged, for brevity omitted) */
  :root {
    --neon: #00e5ff;
    --bg-dark: #030305;
    --panel: rgba(10, 12, 15, 0.9);
    --hover: #00ffb3;
    --hud-w: 260px;
  }
  /* … other CSS as in your prior code … */
  /* Include all styles exactly as before */
</style>
</head>
<body>

<!-- Login Overlay -->
<div id="loginOverlay" role="dialog" aria-label="Login">
  <div class="login-card" role="document">
    <h1>Login</h1>
    <input id="loginPass" class="login-input" type="password" placeholder="Enter password" aria-label="Password" />
    <div class="login-actions">
      <button id="loginBtn" class="btn-primary" aria-label="Enter">Enter</button>
    </div>
    <div class="login-sub">Enter the password to access the portfolio</div>
  </div>
</div>

<!-- HUD: Time, Date, Location, Weather -->
<div id="hud" aria-live="polite">
  <div><i class="fa-regular fa-calendar"></i> <span id="hud-date"></span></div>
  <div><i class="fa-regular fa-clock"></i> <span id="hud-time"></span></div>
  <div><i class="fa-solid fa-location-dot"></i> <span id="hud-city">Toronto</span></div>
  <div>Coords: <span id="hud-coords">—</span></div>
  <div><i class="fa-solid fa-cloud"></i> <span id="hud-weather">—</span></div>
</div>

<!-- Main content area -->
<main id="main" style="display:none;">
  <div class="headerTitle" id="headerToggle">>: ["Hello World..."]</div>
  <nav>
    <button class="nav-btn" data-panel="whoami">Whoami</button>
    <button class="nav-btn" data-panel="reflection">Reflection</button>
    <button class="nav-btn" data-panel="productions">Productions</button>
    <button class="nav-btn" data-panel="resources">Resources</button>
    <button class="nav-btn" data-panel="contact">Contact</button>
  </nav>

  <section id="whoami" class="panel hidden">
    <h2>Whoami</h2>
    <p><strong>/BrandonSmart</strong><br />Teachable: ComputerTechnology</p>
    <button class="close-btn" data-close="whoami">Close</button>
  </section>

  <section id="reflection" class="panel hidden">
    <h2>Reflection</h2>
    <div id="reflectionText"></div>
    <button class="close-btn" data-close="reflection">Close</button>
  </section>

  <section id="productions" class="panel hidden">
    <h2>Productions</h2>
    <div id="productionList">
      <button class="production-item" data-index="0">Production 1: Power Up (Screenshots)</button>
      <button class="production-item" data-index="1">Production 2: Reflection</button>
      <!-- Add other productions as needed -->
    </div>
    <button class="close-btn" data-close="productions">Close</button>
  </section>

  <section id="productionDetail" class="panel hidden">
    <h2 id="prodTitle"></h2>
    <div id="prodContent"></div>
    <button class="close-btn" data-close="productionDetail">Back</button>
  </section>

  <section id="resources" class="panel hidden">
    <h2>Resources</h2>
    <ul>
      <li><a href="https://github.com" target="_blank" rel="noopener">GitHub</a></li>
      <li><a href="https://stackoverflow.com" target="_blank" rel="noopener">Stack Overflow</a></li>
      <li><a href="https://openweathermap.org" target="_blank" rel="noopener">OpenWeatherMap API</a></li>
    </ul>
    <button class="close-btn" data-close="resources">Close</button>
  </section>

  <section id="contact" class="panel hidden">
   <h2>Contact</h2>
   <p>Email: <a href="mailto:bsmart@my.york.ca">bsmart@my.york.ca</a></p>
   <button class="close-btn" data-close="contact">Close</button>
  </section>

  <div id="quote" aria-live="polite"></div>
</main>

<!-- Gallery Drawer -->
<div id="galleryModal" class="hidden">
  <button id="galleryPrev">Prev</button>
  <img id="galleryImage" src="" alt="Production Screenshot" />
  <button id="galleryNext">Next</button>
  <button id="galleryClose">Close</button>
</div>

<!-- Terminal -->
<div id="terminal" class="hidden">
  <div id="terminalOutput" aria-live="polite" aria-atomic="false"></div>
  <input id="terminalInput" type="text" placeholder="Enter command" />
</div>

<!-- Audio -->
<audio id="audioSuccess" src="sounds/robotintro.mp3" preload></audio>
<audio id="audioError" src="sounds/Hacked computer- Sound Effect.mp3" preload></audio>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const loginOverlay = document.getElementById('loginOverlay');
  const loginBtn = document.getElementById('loginBtn');
  const loginPass = document.getElementById('loginPass');
  const audioSuccess = document.getElementById('audioSuccess');
  const audioError = document.getElementById('audioError');
  const main = document.getElementById('main');
  const toastTimeouts = [];

  function showPanel(id) {
    document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
  }

  // Login feature
  function validateLogin() {
    if (loginPass.value.trim() === 'mrsmart') {
      loginOverlay.style.display = 'none';
      main.style.display = 'block';
      audioSuccess.play();
      startHud();
      initTerminal();
      updateQuote();
      updateWeather();
    } else {
      audioError.play();
      loginPass.value = '';
      loginPass.placeholder = 'Incorrect password, try again';
      loginPass.focus();
      loginOverlay.style.animation = 'shake 0.3s';
      loginOverlay.addEventListener('animationend', () => {
        loginOverlay.style.animation = '';
      }, { once: true });
    }
  }

  loginBtn.addEventListener('click', validateLogin);
  loginPass.addEventListener('keydown', e => {
    if (e.key === 'Enter') validateLogin();
  });

  // HUD: Time and Date
  function startHud() {
    function updateTime() {
      const now = new Date();
      document.getElementById('hud-time').textContent = now.toLocaleTimeString();
      document.getElementById('hud-date').textContent = now.toDateString();
    }
    updateTime();
    setInterval(updateTime, 1000);
  }

  // Quote rotation
  const quotes = [
    "Code is like humor. When you have to explain it, it’s bad.",
    "First, solve the problem. Then, write the code.",
    "Experience is the name everyone gives to their mistakes.",
    "Sometimes it's the people no one imagines anything of, who do the things no one imagines."
  ];
  const quoteEl = document.getElementById('quote');
  let quoteIndex = 0;

  function updateQuote() {
    quoteEl.textContent = quotes[quoteIndex];
    quoteIndex = (quoteIndex + 1) % quotes.length;
    setTimeout(updateQuote, 6000);
  }

  // Weather and Geolocation, with permission prompt
  function updateWeather() {
    const cityEl = document.getElementById('hud-city');
    const coordsEl = document.getElementById('hud-coords');
    const weatherEl = document.getElementById('hud-weather');

    if (!navigator.geolocation) {
      cityEl.textContent = 'Geolocation not supported';
      coordsEl.textContent = 'N/A';
      weatherEl.textContent = 'Unavailable';
      return;
    }
    cityEl.textContent = 'Click to show location';
    cityEl.style.cursor = 'pointer';
    cityEl.onclick = () => {
      navigator.geolocation.getCurrentPosition(async (pos) => {
        const { latitude, longitude } = pos.coords;
        coordsEl.textContent = `${latitude.toFixed(3)}, ${longitude.toFixed(3)}`;
        try {
          const resp = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=504dbd2be1d9e1db4556286a216e1b00&units=metric`);
          if (!resp.ok) throw new Error('Weather API error');
          const data = await resp.json();
          cityEl.textContent = data.name || 'Unknown city';
          weatherEl.textContent = data.weather[0].description.charAt(0).toUpperCase() + data.weather[0].description.slice(1) + ', ' + data.main.temp.toFixed(1) + ' °C';
        } catch {
          weatherEl.textContent = 'Unavailable';
        }
      }, () => {
        cityEl.textContent = 'Location access denied';
        coordsEl.textContent = 'N/A';
        weatherEl.textContent = 'Unavailable';
      });
    };
  }

  // Panel Navigation buttons
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const panelId = btn.getAttribute('data-panel');
      showPanel(panelId);
      if (panelId === 'reflection') speakReflection();
    });
  });

  // Close button functionality
  document.querySelectorAll('.close-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const panelId = btn.getAttribute('data-close');
      document.getElementById(panelId).classList.add('hidden');
    });
  });

  // Reflection text setup
  const reflectionContent = `Your full reflection text here, formatted naturally.

Break paragraphs with blank lines.

This will appear clearly when viewing the reflection panel.`;

  const prod2Reflection = `Your extended reflection text for Production 2 here.

You can split paragraphs with blank lines to format fully.`;

  document.getElementById('reflectionText').innerHTML = reflectionContent.replace(/\n\n/g, '</p><p>').split('\n').join('<br>');

  document.getElementById('prodContent')?.style && (document.getElementById('prodContent').textContent = '');

  // Update Production 2 reflection text
  document.getElementById('prod2').InnerHTML = prod2Reflection.replace(/\n\n/g,'</p><p>');

  // Productions gallery
  const productions = {
    0: [
      "images/Screenshot 1.png",
      "images/Screenshot 2.png",
      "images/Screenshot 3.png",
      "images/Screenshot 4.png",
      "images/Screenshot 5.png"
    ]
  };

  const galleryModal = document.getElementById('galleryModal');
  const galleryImage = document.getElementById('galleryImage');
  let currentGallery = [];
  let currentIndex = 0;

  document.querySelectorAll('.production-item').forEach(button => {
    button.addEventListener('click', () => {
      const index = button.getAttribute('data-index');
      if (productions[index]) {
        currentGallery = productions[index];
        currentIndex = 0;
        galleryImage.src = currentGallery[currentIndex];
        galleryModal.classList.remove('hidden');
      } else if (index === '1') {
        showPanel('reflection');
      }
    });
  });

  document.getElementById('galleryPrev').onclick = () => {
    if (currentGallery.length) {
      currentIndex = (currentIndex - 1 + currentGallery.length) % currentGallery.length;
      galleryImage.src = currentGallery[currentIndex];
    }
  };
  document.getElementById('galleryNext').onclick = () => {
    if (currentGallery.length) {
      currentIndex = (currentIndex + 1) % currentGallery.length;
      galleryImage.src = currentGallery[currentIndex];
    }
  };
  document.getElementById('galleryClose').onclick = () => {
    galleryModal.classList.add('hidden');
  };

  // Terminal functionality
  const terminal = document.getElementById('terminal');
  const terminalOutput = document.getElementById('terminalOutput');
  const terminalInput = document.getElementById('terminalInput');
  const headerToggle = document.getElementById('headerToggle');

  let terminalOpen = false;

  headerToggle.onclick = () => {
    if (terminal.style.display === 'block') {
      terminal.style.display = 'none';
    } else {
      terminal.style.display = 'block';
      terminalInput.focus();
    }
  };

  terminalInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      const cmd = terminalInput.value.trim().toLowerCase();
      terminalOutput.textContent += `> ${cmd}\n`;
      terminalInput.value = '';

      switch (cmd) {
        case 'whoami':
          showPanel('whoami');
          break;
        case 'reflection':
          showPanel('reflection');
          speakReflection();
          break;
        case 'productions':
          showPanel('productions');
          break;
        case 'resources':
          showPanel('resources');
          break;
        case 'contact':
          showPanel('contact');
          break;
        case 'back':
          document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
          break;
        default:
          terminalOutput.textContent += `Unknown command: ${cmd}\n`;
      }
      terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }
  });

  function speakReflection() {
    const utterance = new SpeechSynthesisUtterance(reflectionContent.replace(/\n/g, ' '));
    utterance.rate = 1.1;
    speechSynthesis.speak(utterance);
  }

  // Start HUD and quote
  startHud();
  updateQuote();
  updateWeather();

  function updateQuote() {
    quoteEl.textContent = quotes[quoteIndex % quotes.length];
    quoteIndex++;
    setTimeout(updateQuote, 6000);
  }
});
</script>

</body>
</html>
