<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Brandon Smart Portfolio</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
:root {
  --neon: #00e5ff;
  --panel: rgba(10,12,15,0.9);
  --hover: #00ffb3;
  --hud-w: 200px; /* smaller HUD to avoid coverage */
}
* {
  box-sizing: border-box;
}
html, body {
  height: 100%;
  margin: 0;
  font-family: 'Share Tech Mono', monospace;
  background: linear-gradient(180deg, #020203, #07080a);
  color: var(--neon);
  -webkit-font-smoothing: antialiased;
  user-select: none;
}
a {
  color: var(--neon);
  text-decoration: underline;
  cursor: pointer;
  user-select: text;
  transition: color 0.18s ease;
}
a:hover,
a:focus {
  color: var(--hover);
  outline: none;
}
.scanlines {
  pointer-events: none;
  position: fixed;
  inset: 0;
  z-index: 40;
  background: repeating-linear-gradient(to bottom, rgba(0,229,255,0.03), rgba(0,229,255,0.03) 1px, transparent 1px, transparent 3px);
  opacity: 0.18;
  filter: brightness(0.9);
  -webkit-mask-image: radial-gradient(circle at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.85) 100%);
  mask-image: radial-gradient(circle at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.85) 100%);
}
#cornerGlobe {
  display: none;
  position: fixed;
  top: 12px;
  right: 12px;
  width: 120px !important;
  height: 120px;
  border-radius: 50%;
  z-index: 3000;
  pointer-events: none;
  -webkit-mask-image: radial-gradient(circle, #000 85%, transparent 100%);
  mask-image: radial-gradient(circle, #000 85%, transparent 100%);
  box-shadow: none; /* No glow to avoid overlap */
}
#loginOverlay {
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0.98), rgba(0,0,0,0.98));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1200;
}
.login-card {
  width: 380px;
  padding: 28px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(0,229,255,0.04), rgba(0,102,153,0.03));
  border: 1px solid rgba(0,229,255,0.12);
  box-shadow: 0 18px 60px rgba(0,0,0,0.7), inset 0 0 14px rgba(0,229,255,0.02);
  text-align: center;
  color: var(--neon);
}
.login-card h1 {
  font-weight: 700;
  margin: 0 0 12px;
  font-size: 20px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  text-shadow: 0 0 5px var(--neon);
  user-select: none;
}
.login-input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 999px;
  border: 1px solid rgba(0,229,255,0.12);
  background: rgba(0,0,0,0.45);
  color: var(--neon);
  outline: none;
  font-size: 14px;
  font-family: 'Share Tech Mono', monospace;
  letter-spacing: 0.05em;
  transition: border-color 0.18s ease;
  user-select: text;
}
.login-input:focus {
  border-color: var(--hover);
}
.login-actions {
  margin-top: 12px;
  display: flex;
  justify-content: center;
  gap: 8px;
}
.btn-primary {
  padding: 8px 16px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  background: linear-gradient(135deg, var(--neon), #00bfff);
  color: #081018;
  font-weight: 700;
  font-size: 0.85em;
  letter-spacing: 0.1em;
  box-shadow: 0 0 24px var(--neon);
  user-select: none;
}
.btn-primary:hover {
  background: var(--hover);
}
.login-sub {
  margin-top: 20px;
  font-weight: 600;
  color: rgba(0,229,255,0.7);
  font-size: 13px;
  user-select:none;
}
#hud {
  position: fixed;
  top: 12px;
  left: 18px;
  width: var(--hud-w);
  padding: 8px 14px;
  border-radius: 12px;
  background: var(--panel);
  border: 1px solid rgba(0,229,255,0.15);
  box-shadow: none;
  font-size: 13px;
  color: var(--neon);
  opacity: 0;
  visibility: hidden;
  text-align: left;
  z-index: 3000;
}
.hud-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 2px 0;
}
.hud-row i {
  min-width: 18px;
  flex-shrink: 0;
  vertical-align: middle;
}
/* Main content and styles (as before) */
/* Termial Input */
#commandLine {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--panel);
  padding: 10px 16px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 14px;
  color: var(--neon);
  display: flex;
  align-items: center;
  z-index: 4000;
  border-top: none;
}
#cmdPrompt {
  margin-right: 10px;
  font-weight: 700;
}
#cmdInput {
  flex: 1;
  background: transparent;
  border: none;
  color: var(--neon);
  outline: none;
  font-family: inherit;
  font-size: inherit;
  letter-spacing: 0.04em;
  user-select: text;
}
#wrongGifOverlay {
  display: none;
  position: fixed;
  inset: 0;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.85);
  z-index: 1500;
}
#wrongGifOverlay img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
/* Responsive styles for HUD & globe */
@media (max-width: 980px) {
  .container {
    flex-direction: column;
  }
  .leftCol {
    width: 100%;
    order: 2;
  }
  .rightCol {
    order: 1;
  }
  #hud {
    left: 10px;
    top: 12px;
    width: 180px;
  }
  #cornerGlobe {
    width: 100px !important;
    height: 100px;
  }
}
</style>
</head>
<body>
<div class="scanlines" aria-hidden="true"></div>

<img src="images/globeglow.gif" id="cornerGlobe" alt="Globe Glow" style="display:none; border-radius:50%;" />

<div id="loginOverlay" role="dialog" aria-label="Login" aria-modal="true">
  <div class="login-card" role="document">
    <h1>Login</h1>
    <input id="loginPass" class="login-input" type="password" placeholder="Enter password" aria-label="Password" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    <div class="login-actions">
      <button id="loginBtn" class="btn-primary" aria-label="Enter">Enter</button>
    </div>
    <div class="login-sub">Enter the terminal</div>
  </div>
</div>

<div id="wrongGifOverlay" aria-hidden="true" role="alert" tabindex="-1">
  <img src="images/computer missing GIF.gif" alt="Wrong Password GIF" />
</div>

<div id="hud" aria-live="polite" aria-label="Heads Up Display">
  <div class="hud-row" id="hud-date"><i class="fa-regular fa-calendar"></i> <span id="hud-date-text">Loading date…</span></div>
  <div class="hud-row" id="hud-time"><i class="fa-regular fa-clock"></i> <span id="hud-time-text">--:--:--</span></div>
  <div class="hud-row" id="hud-loc"><i class="fa-solid fa-location-dot"></i> <span id="hud-city">Toronto</span></div>
  <div class="hud-row" id="hud-coords"><i class="fa-solid fa-crosshairs"></i> Coords: <span id="hud-coords-text">—</span></div>
  <div class="hud-row" id="hud-weather"><i class="fa-solid fa-cloud-sun"></i> <span id="hud-weather-text">—</span></div>
</div>

<main id="main" role="main" tabindex="-1">
  <div class="container">
    <div class="leftCol" aria-hidden="false">
      <div class="headerTitle">>: ["Hello World..."]</div>
      <div id="navWho" class="navItem" role="button" tabindex="0" aria-controls="whoPanel">Whoami</div>
      <div id="navRef" class="navItem" role="button" tabindex="0" aria-controls="refPanel">Reflection</div>
      <div id="navProd" class="navItem" role="button" tabindex="0" aria-controls="prodPanel">Productions</div>
      <div id="navRes" class="navItem" role="button" tabindex="0" aria-controls="resPanel">Resources</div>
      <div id="navContact" class="navItem" role="button" tabindex="0" aria-controls="contactPanel">Contact</div>
    </div>
    <div class="rightCol">
      <!-- panels go here (whoami, reflection, productions with gallery etc) -->
    </div>
  </div>
  <!-- quotes or other content as needed -->
</main>

<div id="commandLine" aria-label="Command line Input" role="region" aria-live="polite">
  <div id="cmdPrompt">&gt;</div>
  <input type="text" id="cmdInput" autocomplete="off" aria-label="Type a command here" />
</div>

<!-- Audio -->
<audio id="loginAudioCorrect" src="sounds/BC_Audio.mp3" preload="auto"></audio>
<audio id="loginAudioWrong" src="sounds/Hacked computer- Sound Effect.mp3" preload="auto"></audio>
<audio id="keyboardClick" src="sounds/keyboard-click.mp3" preload="auto"></audio>

<script>
const loginOverlay = document.getElementById('loginOverlay');
const loginBtn = document.getElementById('loginBtn');
const loginPass = document.getElementById('loginPass');
const wrongGif = document.getElementById('wrongGifOverlay');
const loginAudioCorrect = document.getElementById('loginAudioCorrect');
const loginAudioWrong = document.getElementById('loginAudioWrong');
const hud = document.getElementById('hud');
const cityEl = document.getElementById('hud-city');
const coordsEl = document.getElementById('hud-coords-text');
const weatherEl = document.getElementById('hud-weather-text');
const dateEl = document.getElementById('hud-date-text');
const timeEl = document.getElementById('hud-time-text');

loginPass.addEventListener('keydown', e => {
  if (e.key === 'Enter') loginBtn.click();
});

loginBtn.addEventListener('click', () => {
  const val = (loginPass.value || '').trim();
  if (val === 'mrsmart') {
    loginOverlay.style.display = 'none';
    document.getElementById('cornerGlobe').style.display = 'block';
    hud.style.opacity = '1';
    hud.style.visibility = 'visible';

    // Date/time update
    updateDateTime();
    if (window.dateTimeInterval) clearInterval(window.dateTimeInterval);
    window.dateTimeInterval = setInterval(updateDateTime, 1000);

    // Only now request geolocation on user interaction/login
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(position => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        coordsEl.textContent = `${lat.toFixed(4)}, ${lon.toFixed(4)}`;
        fetchWeather(lat, lon);
      }, err => {
        coordsEl.textContent = 'Denied';
        weatherEl.textContent = 'Unavailable';
        cityEl.textContent = 'Unknown';
        console.warn('Geolocation permission denied or error:', err);
      }, { timeout: 8000 });
    } else {
      coordsEl.textContent = 'Geolocation unsupported';
      weatherEl.textContent = 'Unavailable';
      cityEl.textContent = 'Unknown';
    }

    playAudio(loginAudioCorrect);
  } else {
    loginPass.value = '';
    loginPass.placeholder = 'Incorrect — try again';
    loginPass.focus();

    loginOverlay.animate([{ transform: 'translateX(-2px)' }, { transform: 'translateX(2px)' }, { transform: 'translateX(0)' }], { duration: 120, iterations: 3 });

    wrongGif.style.display = 'flex';
    playAudio(loginAudioWrong);
    setTimeout(() => {
      wrongGif.style.display = 'none';
      loginAudioWrong.pause();
      loginAudioWrong.currentTime = 0;
    }, 2200);
  }
});

function playAudio(audioEl) {
  audioEl.muted = false;
  audioEl.volume = 0.7;
  audioEl.pause();
  audioEl.currentTime = 0;
  audioEl.play().catch(() => {});
}

function updateDateTime() {
  const now = new Date();
  dateEl.textContent = now.toDateString();
  timeEl.textContent = now.toLocaleTimeString();
}

function fetchWeather(lat, lon) {
  const apiKey = '5043108521e5dc1feccf33701c3221bf';
  const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

  fetch(url).then(res => {
    if (!res.ok) throw new Error('Weather fetch failed');
    return res.json();
  }).then(data => {
    cityEl.textContent = data.name || 'Unknown';
    let desc = data.weather[0].description;
    desc = desc.charAt(0).toUpperCase() + desc.slice(1);
    weatherEl.textContent = `${desc}, ${data.main.temp.toFixed(1)}°C`;
  }).catch(err => {
    weatherEl.textContent = 'Weather unavailable';
    console.warn(err);
  });
}

// Your existing openPanel, closePanel, reflection typing, production gallery,
// and terminal input handlers go here (not repeated for brevity)...

</script>
</body>
</html>
